{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///D:/work/4th%20year/InnerGuide-Digital/lib/mongodb.ts"],"sourcesContent":["import mongoose from 'mongoose';\r\n\r\nconst MONGODB_URI = process.env.MONGODB_URI || 'mongodb://localhost:27017/mental-health-app';\r\n\r\nif (!MONGODB_URI) {\r\n  throw new Error('Please define the MONGODB_URI environment variable');\r\n}\r\n\r\nlet cached = global.mongoose;\r\n\r\nif (!cached) {\r\n  cached = global.mongoose = { conn: null, promise: null };\r\n}\r\n\r\nexport async function connectToDatabase() {\r\n  if (cached.conn) {\r\n    return cached.conn;\r\n  }\r\n\r\n  if (!cached.promise) {\r\n    const opts = {\r\n      bufferCommands: false,\r\n    };\r\n\r\n    cached.promise = mongoose\r\n      .connect(MONGODB_URI, opts)\r\n      .then((mongoose) => {\r\n        return mongoose;\r\n      });\r\n  }\r\n\r\n  try {\r\n    cached.conn = await cached.promise;\r\n  } catch (e) {\r\n    cached.promise = null;\r\n    throw e;\r\n  }\r\n\r\n  return cached.conn;\r\n}\r\n\r\ndeclare global {\r\n  var mongoose: any;\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW,IAAI;AAE/C;;AAIA,IAAI,SAAS,yDAAO,QAAQ;AAE5B,IAAI,CAAC,QAAQ;IACX,SAAS,yDAAO,QAAQ,GAAG;QAAE,MAAM;QAAM,SAAS;IAAK;AACzD;AAEO,eAAe;IACpB,IAAI,OAAO,IAAI,EAAE;QACf,OAAO,OAAO,IAAI;IACpB;IAEA,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,MAAM,OAAO;YACX,gBAAgB;QAClB;QAEA,OAAO,OAAO,GAAG,oHAAQ,CACtB,OAAO,CAAC,aAAa,MACrB,IAAI,CAAC,CAAC;YACL,OAAO;QACT;IACJ;IAEA,IAAI;QACF,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IACpC,EAAE,OAAO,GAAG;QACV,OAAO,OAAO,GAAG;QACjB,MAAM;IACR;IAEA,OAAO,OAAO,IAAI;AACpB"}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///D:/work/4th%20year/InnerGuide-Digital/models/User.ts"],"sourcesContent":["import mongoose, { Schema, Document } from 'mongoose';\r\n\r\nexport interface IUser extends Document {\r\n  email: string;\r\n  password: string;\r\n  name: string;\r\n  role: 'student' | 'counselor' | 'admin';\r\n  collegeId: string;\r\n  phone?: string;\r\n  department?: string;\r\n  year?: number;\r\n  counselorSpecialization?: string;\r\n  bio?: string;\r\n  isAvailable?: boolean;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nconst userSchema = new Schema<IUser>(\r\n  {\r\n    email: {\r\n      type: String,\r\n      required: true,\r\n      unique: true,\r\n      lowercase: true,\r\n      trim: true,\r\n    },\r\n    password: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    name: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    role: {\r\n      type: String,\r\n      enum: ['student', 'counselor', 'admin'],\r\n      default: 'student',\r\n    },\r\n    collegeId: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    phone: String,\r\n    department: String,\r\n    year: Number,\r\n    counselorSpecialization: String,\r\n    bio: String,\r\n    isAvailable: { type: Boolean, default: true },\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\nexport const User = mongoose.models.User || mongoose.model<IUser>('User', userSchema);\r\n"],"names":[],"mappings":";;;;AAAA;;AAkBA,MAAM,aAAa,IAAI,mHAAM,CAC3B;IACE,OAAO;QACL,MAAM;QACN,UAAU;QACV,QAAQ;QACR,WAAW;QACX,MAAM;IACR;IACA,UAAU;QACR,MAAM;QACN,UAAU;IACZ;IACA,MAAM;QACJ,MAAM;QACN,UAAU;IACZ;IACA,MAAM;QACJ,MAAM;QACN,MAAM;YAAC;YAAW;YAAa;SAAQ;QACvC,SAAS;IACX;IACA,WAAW;QACT,MAAM;QACN,UAAU;IACZ;IACA,OAAO;IACP,YAAY;IACZ,MAAM;IACN,yBAAyB;IACzB,KAAK;IACL,aAAa;QAAE,MAAM;QAAS,SAAS;IAAK;AAC9C,GACA;IAAE,YAAY;AAAK;AAGd,MAAM,OAAO,oHAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,oHAAQ,CAAC,KAAK,CAAQ,QAAQ"}},
    {"offset": {"line": 156, "column": 0}, "map": {"version":3,"sources":["file:///D:/work/4th%20year/InnerGuide-Digital/lib/auth.ts"],"sourcesContent":["import jwt from 'jsonwebtoken';\r\n\r\nconst JWT_SECRET = process.env.JWT_SECRET || 'your-secret-key-change-in-production';\r\n\r\nexport interface JWTPayload {\r\n  userId: string;\r\n  email: string;\r\n  role: 'student' | 'counselor' | 'admin';\r\n}\r\n\r\nexport const generateToken = (payload: JWTPayload): string => {\r\n  return jwt.sign(payload, JWT_SECRET, { expiresIn: '7d' });\r\n};\r\n\r\nexport const verifyToken = (token: string): JWTPayload | null => {\r\n  try {\r\n    return jwt.verify(token, JWT_SECRET) as JWTPayload;\r\n  } catch (error) {\r\n    return null;\r\n  }\r\n};\r\n\r\nexport const decodeToken = (token: string): JWTPayload | null => {\r\n  try {\r\n    return jwt.decode(token) as JWTPayload;\r\n  } catch (error) {\r\n    return null;\r\n  }\r\n};\r\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEA,MAAM,aAAa,QAAQ,GAAG,CAAC,UAAU,IAAI;AAQtC,MAAM,gBAAgB,CAAC;IAC5B,OAAO,kJAAG,CAAC,IAAI,CAAC,SAAS,YAAY;QAAE,WAAW;IAAK;AACzD;AAEO,MAAM,cAAc,CAAC;IAC1B,IAAI;QACF,OAAO,kJAAG,CAAC,MAAM,CAAC,OAAO;IAC3B,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF;AAEO,MAAM,cAAc,CAAC;IAC1B,IAAI;QACF,OAAO,kJAAG,CAAC,MAAM,CAAC;IACpB,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF"}},
    {"offset": {"line": 196, "column": 0}, "map": {"version":3,"sources":["file:///D:/work/4th%20year/InnerGuide-Digital/app/api/auth/register/route.ts"],"sourcesContent":["import { connectToDatabase } from '@/lib/mongodb';\r\nimport { User } from '@/models/User';\r\nimport { generateToken } from '@/lib/auth';\r\nimport bcrypt from 'bcryptjs';\r\nimport { NextResponse } from 'next/server';\r\n\r\nexport async function POST(request: Request) {\r\n  try {\r\n    await connectToDatabase();\r\n    const body = await request.json();\r\n\r\n    const { email, password, name, collegeId, role = 'student' } = body;\r\n\r\n    if (!email || !password || !name || !collegeId) {\r\n      return NextResponse.json(\r\n        { error: 'Missing required fields' },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const existingUser = await User.findOne({ email });\r\n    if (existingUser) {\r\n      return NextResponse.json(\r\n        { error: 'Email already registered' },\r\n        { status: 409 }\r\n      );\r\n    }\r\n\r\n    const hashedPassword = await bcrypt.hash(password, 10);\r\n\r\n    const user = new User({\r\n      email,\r\n      password: hashedPassword,\r\n      name,\r\n      collegeId,\r\n      role,\r\n    });\r\n\r\n    await user.save();\r\n\r\n    const token = generateToken({\r\n      userId: user._id.toString(),\r\n      email: user.email,\r\n      role: user.role,\r\n    });\r\n\r\n    return NextResponse.json(\r\n      {\r\n        success: true,\r\n        user: {\r\n          id: user._id,\r\n          email: user.email,\r\n          name: user.name,\r\n          role: user.role,\r\n        },\r\n        token,\r\n      },\r\n      { status: 201 }\r\n    );\r\n  } catch (error) {\r\n    console.error('Registration error:', error);\r\n    return NextResponse.json(\r\n      { error: 'Registration failed' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;;;;;;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,IAAA,qIAAiB;QACvB,MAAM,OAAO,MAAM,QAAQ,IAAI;QAE/B,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,SAAS,EAAE,GAAG;QAE/D,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,QAAQ,CAAC,WAAW;YAC9C,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA0B,GACnC;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,eAAe,MAAM,wHAAI,CAAC,OAAO,CAAC;YAAE;QAAM;QAChD,IAAI,cAAc;YAChB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA2B,GACpC;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,iBAAiB,MAAM,8IAAM,CAAC,IAAI,CAAC,UAAU;QAEnD,MAAM,OAAO,IAAI,wHAAI,CAAC;YACpB;YACA,UAAU;YACV;YACA;YACA;QACF;QAEA,MAAM,KAAK,IAAI;QAEf,MAAM,QAAQ,IAAA,8HAAa,EAAC;YAC1B,QAAQ,KAAK,GAAG,CAAC,QAAQ;YACzB,OAAO,KAAK,KAAK;YACjB,MAAM,KAAK,IAAI;QACjB;QAEA,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,MAAM;gBACJ,IAAI,KAAK,GAAG;gBACZ,OAAO,KAAK,KAAK;gBACjB,MAAM,KAAK,IAAI;gBACf,MAAM,KAAK,IAAI;YACjB;YACA;QACF,GACA;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAsB,GAC/B;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}