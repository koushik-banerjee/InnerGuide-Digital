{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///D:/work/4th%20year/InnerGuide-Digital/lib/mongodb.ts"],"sourcesContent":["import mongoose from 'mongoose';\r\n\r\nconst MONGODB_URI = process.env.MONGODB_URI || 'mongodb://localhost:27017/mental-health-app';\r\n\r\nif (!MONGODB_URI) {\r\n  throw new Error('Please define the MONGODB_URI environment variable');\r\n}\r\n\r\nlet cached = global.mongoose;\r\n\r\nif (!cached) {\r\n  cached = global.mongoose = { conn: null, promise: null };\r\n}\r\n\r\nexport async function connectToDatabase() {\r\n  if (cached.conn) {\r\n    return cached.conn;\r\n  }\r\n\r\n  if (!cached.promise) {\r\n    const opts = {\r\n      bufferCommands: false,\r\n    };\r\n\r\n    cached.promise = mongoose\r\n      .connect(MONGODB_URI, opts)\r\n      .then((mongoose) => {\r\n        return mongoose;\r\n      });\r\n  }\r\n\r\n  try {\r\n    cached.conn = await cached.promise;\r\n  } catch (e) {\r\n    cached.promise = null;\r\n    throw e;\r\n  }\r\n\r\n  return cached.conn;\r\n}\r\n\r\ndeclare global {\r\n  var mongoose: any;\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW,IAAI;AAE/C;;AAIA,IAAI,SAAS,yDAAO,QAAQ;AAE5B,IAAI,CAAC,QAAQ;IACX,SAAS,yDAAO,QAAQ,GAAG;QAAE,MAAM;QAAM,SAAS;IAAK;AACzD;AAEO,eAAe;IACpB,IAAI,OAAO,IAAI,EAAE;QACf,OAAO,OAAO,IAAI;IACpB;IAEA,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,MAAM,OAAO;YACX,gBAAgB;QAClB;QAEA,OAAO,OAAO,GAAG,oHAAQ,CACtB,OAAO,CAAC,aAAa,MACrB,IAAI,CAAC,CAAC;YACL,OAAO;QACT;IACJ;IAEA,IAAI;QACF,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IACpC,EAAE,OAAO,GAAG;QACV,OAAO,OAAO,GAAG;QACjB,MAAM;IACR;IAEA,OAAO,OAAO,IAAI;AACpB"}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///D:/work/4th%20year/InnerGuide-Digital/models/Resource.ts"],"sourcesContent":["import mongoose, { Schema, Document } from 'mongoose';\r\n\r\nexport interface IResource extends Document {\r\n  title: string;\r\n  description: string;\r\n  category: 'video' | 'audio' | 'guide' | 'article';\r\n  type: 'coping-strategy' | 'meditation' | 'sleep' | 'exercise' | 'nutrition' | 'stress-management' | 'anxiety' | 'depression' | 'relationships' | 'academic';\r\n  languages: string[];\r\n  content: {\r\n    url?: string;\r\n    text?: string;\r\n    duration?: number;\r\n  };\r\n  tags: string[];\r\n  difficulty: 'beginner' | 'intermediate' | 'advanced';\r\n  rating: number;\r\n  views: number;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nconst resourceSchema = new Schema<IResource>(\r\n  {\r\n    title: { type: String, required: true },\r\n    description: { type: String, required: true },\r\n    category: {\r\n      type: String,\r\n      enum: ['video', 'audio', 'guide', 'article'],\r\n      required: true,\r\n    },\r\n    type: {\r\n      type: String,\r\n      enum: ['coping-strategy', 'meditation', 'sleep', 'exercise', 'nutrition', 'stress-management', 'anxiety', 'depression', 'relationships', 'academic'],\r\n      required: true,\r\n    },\r\n    languages: [{ type: String, default: 'en' }],\r\n    content: {\r\n      url: String,\r\n      text: String,\r\n      duration: Number,\r\n    },\r\n    tags: [String],\r\n    difficulty: {\r\n      type: String,\r\n      enum: ['beginner', 'intermediate', 'advanced'],\r\n      default: 'beginner',\r\n    },\r\n    rating: { type: Number, default: 0 },\r\n    views: { type: Number, default: 0 },\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\nexport const Resource = mongoose.models.Resource || mongoose.model<IResource>('Resource', resourceSchema);\r\n"],"names":[],"mappings":";;;;AAAA;;AAqBA,MAAM,iBAAiB,IAAI,mHAAM,CAC/B;IACE,OAAO;QAAE,MAAM;QAAQ,UAAU;IAAK;IACtC,aAAa;QAAE,MAAM;QAAQ,UAAU;IAAK;IAC5C,UAAU;QACR,MAAM;QACN,MAAM;YAAC;YAAS;YAAS;YAAS;SAAU;QAC5C,UAAU;IACZ;IACA,MAAM;QACJ,MAAM;QACN,MAAM;YAAC;YAAmB;YAAc;YAAS;YAAY;YAAa;YAAqB;YAAW;YAAc;YAAiB;SAAW;QACpJ,UAAU;IACZ;IACA,WAAW;QAAC;YAAE,MAAM;YAAQ,SAAS;QAAK;KAAE;IAC5C,SAAS;QACP,KAAK;QACL,MAAM;QACN,UAAU;IACZ;IACA,MAAM;QAAC;KAAO;IACd,YAAY;QACV,MAAM;QACN,MAAM;YAAC;YAAY;YAAgB;SAAW;QAC9C,SAAS;IACX;IACA,QAAQ;QAAE,MAAM;QAAQ,SAAS;IAAE;IACnC,OAAO;QAAE,MAAM;QAAQ,SAAS;IAAE;AACpC,GACA;IAAE,YAAY;AAAK;AAGd,MAAM,WAAW,oHAAQ,CAAC,MAAM,CAAC,QAAQ,IAAI,oHAAQ,CAAC,KAAK,CAAY,YAAY"}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file:///D:/work/4th%20year/InnerGuide-Digital/app/api/resources/route.ts"],"sourcesContent":["import { connectToDatabase } from '@/lib/mongodb';\r\nimport { Resource } from '@/models/Resource';\r\nimport { NextResponse } from 'next/server';\r\n\r\nexport async function GET(request: Request) {\r\n  try {\r\n    await connectToDatabase();\r\n\r\n    const { searchParams } = new URL(request.url);\r\n    const type = searchParams.get('type');\r\n    const category = searchParams.get('category');\r\n    const language = searchParams.get('language') || 'en';\r\n    const page = parseInt(searchParams.get('page') || '1');\r\n    const limit = 12;\r\n\r\n    let query: any = {};\r\n\r\n    if (type) query.type = type;\r\n    if (category) query.category = category;\r\n    query.languages = language;\r\n\r\n    const resources = await Resource.find(query)\r\n      .limit(limit)\r\n      .skip((page - 1) * limit)\r\n      .sort({ views: -1, createdAt: -1 });\r\n\r\n    const total = await Resource.countDocuments(query);\r\n\r\n    return NextResponse.json(\r\n      {\r\n        resources,\r\n        pagination: {\r\n          page,\r\n          limit,\r\n          total,\r\n          pages: Math.ceil(total / limit),\r\n        },\r\n      },\r\n      { status: 200 }\r\n    );\r\n  } catch (error) {\r\n    console.error('Fetch resources error:', error);\r\n    return NextResponse.json(\r\n      { error: 'Failed to fetch resources' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function POST(request: Request) {\r\n  try {\r\n    await connectToDatabase();\r\n    const body = await request.json();\r\n\r\n    const resource = new Resource(body);\r\n    await resource.save();\r\n\r\n    return NextResponse.json({ resource }, { status: 201 });\r\n  } catch (error) {\r\n    console.error('Create resource error:', error);\r\n    return NextResponse.json(\r\n      { error: 'Failed to create resource' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAEO,eAAe,IAAI,OAAgB;IACxC,IAAI;QACF,MAAM,IAAA,qIAAiB;QAEvB,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,OAAO,aAAa,GAAG,CAAC;QAC9B,MAAM,WAAW,aAAa,GAAG,CAAC;QAClC,MAAM,WAAW,aAAa,GAAG,CAAC,eAAe;QACjD,MAAM,OAAO,SAAS,aAAa,GAAG,CAAC,WAAW;QAClD,MAAM,QAAQ;QAEd,IAAI,QAAa,CAAC;QAElB,IAAI,MAAM,MAAM,IAAI,GAAG;QACvB,IAAI,UAAU,MAAM,QAAQ,GAAG;QAC/B,MAAM,SAAS,GAAG;QAElB,MAAM,YAAY,MAAM,gIAAQ,CAAC,IAAI,CAAC,OACnC,KAAK,CAAC,OACN,IAAI,CAAC,CAAC,OAAO,CAAC,IAAI,OAClB,IAAI,CAAC;YAAE,OAAO,CAAC;YAAG,WAAW,CAAC;QAAE;QAEnC,MAAM,QAAQ,MAAM,gIAAQ,CAAC,cAAc,CAAC;QAE5C,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE;YACA,YAAY;gBACV;gBACA;gBACA;gBACA,OAAO,KAAK,IAAI,CAAC,QAAQ;YAC3B;QACF,GACA;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA4B,GACrC;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,IAAA,qIAAiB;QACvB,MAAM,OAAO,MAAM,QAAQ,IAAI;QAE/B,MAAM,WAAW,IAAI,gIAAQ,CAAC;QAC9B,MAAM,SAAS,IAAI;QAEnB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE;QAAS,GAAG;YAAE,QAAQ;QAAI;IACvD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA4B,GACrC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}